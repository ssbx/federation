#!/bin/sh

set -e

# easy makefile
echo '
.PHONY: all clean_all

all:
	make -C build all

clean_all:
	rm -rf build; rm Makefile

run: all
	cd build && ./federation

%: 
	make -C build $@
' > Makefile

git submodule update --init deps/cargo
git submodule update --init deps/cglm
git submodule update --init deps/clog
git submodule update --init deps/glew
git submodule update --init deps/libobj
git submodule update --init deps/soil
git submodule update --init deps/glfw
git submodule update --init --recursive --remote deps/libshake

# cleanup build dir if exist
rm -rf build

# create Unix Makefiles project
mkdir build && cd build && cmake ..


